# Copilot 程式碼審查規則

- 回覆一律使用繁體中文。

## 程式碼品質

- 檢查命名是否清楚、符合駝峰式命名慣例；避免縮寫與含糊字（如 `data`, `list`, `info`）。
- 檢查是否有未處理的錯誤（缺少 `try/catch`、缺少錯誤回傳或錯誤邊界）。
- 檢查是否有重複程式碼；如有，建議抽出共用函式/元件或 hooks。
- 若發現問題，提供**具體修改建議與程式碼片段**（含前後對照）。

## TypeScript 規範

- 程式碼必須使用 TypeScript，嚴禁 `any`（含隱性 `any`）。
- 避免 `as` 強制轉型；若必要需附上合理原因與更安全替代（泛型、型別守衛）。
- 函式、變數、`props`、`emit` 事件皆需**明確型別**；回傳型別不可依賴推論。
- 檢查 `null/undefined` 與邊界情況（空陣列、空字串、零值）。

## Vue / 前端規範

- 優先使用 Composition API，不使用 Options API；避免在模板中放重運算。
- 檢查 `ref` / `computed` / `watch` 使用是否正確；避免多餘或深層 `watch`。
  - 事件監聽器、計時器、訂閱需在 `onUnmounted` 正確清理。
- `defineProps` / `defineEmits` 需使用泛型定義型別；避免寬鬆 `any` 事件負載。
- 非必要避免在 `setup` 產生副作用；I/O 請隔離於 service 層。

## 效能與可維護性

- 避免不必要的巢狀迴圈與重複計算；需要時加入節流/防抖或記憶化。
- 建議適當模組化，避免單一檔案超過 500 行；函式過長（>50 行）請切分。
- 檢查第三方相依是否可被抽象（接口/Adapter），降低耦合。

## 安全與穩定性（建議檢查）

- API 呼叫需處理逾時、重試與錯誤訊息；避免把敏感資訊寫入日誌。
- 對使用者輸入做最基本的驗證/逃逸；避免 XSS/注入風險。

## 回覆格式

- 先給「整體評語」（亮點 + 風險）。
- 再以條列列出「問題 → 原因 → 修正建議」，並附**可直接貼上的程式碼片段**。
